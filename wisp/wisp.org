* Local Variables :noexport:
  Local Variables:
  fill-column: 60
  End:

* Wisp Internals

** Memory Layout

   A wisp word is 32 bits.

   The least 3 significant bits hold a tag, the /lowtag/.

*** Lowtag values

    |-----+-----+-----------------|
    | Tag | Hex | Type            |
    |-----+-----+-----------------|
    | 000 | 0x0 | FIXNUM          |
    | 100 | 0x4 | FIXNUM          |
    | 010 | 0x2 | OTHER-IMMEDIATE |
    | 110 | 0x6 | OTHER-IMMEDIATE |
    | 011 | 0x3 | CONS-PTR        |
    | 101 | 0x5 | STRUCT-PTR      |
    | 111 | 0x7 | OTHER-PTR       |
    |-----+-----+-----------------|

*** Immediate words

    The IMMEDIATE-TYPE includes the 2-bit lowtag which is
    always `10`.  It is more efficient to compare them
    as bytes.

    |------+----------------|
    | Bits | Field          |
    |------+----------------|
    |   24 | IMMEDIATE-DATA |
    |    8 | IMMEDIATE-TYPE |
    |------+----------------|

    |----------+-----+--------------------|
    |      Tag | Hex | Type               |
    |----------+-----+--------------------|
    | 00000010 | 0x2 | SYMBOL-DATA        |
    | 00000110 | 0x6 | SIMPLE-VECTOR-DATA |
    |----------+-----+--------------------|

*** Symbols

    A symbol is an OTHER-POINTER to a SYMBOL-DATA.
